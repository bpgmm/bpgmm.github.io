<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Batch advanced search | CEU Mass Mediator</title>
    <meta name="description" content="Documentation">
    
    
    <link rel="preload" href="/assets/css/0.styles.d5b12882.css" as="style"><link rel="preload" href="/assets/js/app.dbc11d85.js" as="script"><link rel="preload" href="/assets/js/34.8f9b87c0.js" as="script"><link rel="prefetch" href="/assets/js/10.41f15b7c.js"><link rel="prefetch" href="/assets/js/11.aee0ded0.js"><link rel="prefetch" href="/assets/js/12.4ce5bc68.js"><link rel="prefetch" href="/assets/js/13.41c31f2f.js"><link rel="prefetch" href="/assets/js/14.79a1d65a.js"><link rel="prefetch" href="/assets/js/15.157f7c92.js"><link rel="prefetch" href="/assets/js/16.981350b4.js"><link rel="prefetch" href="/assets/js/17.f333ab8f.js"><link rel="prefetch" href="/assets/js/18.ca5c4cfb.js"><link rel="prefetch" href="/assets/js/19.4c9ccc5c.js"><link rel="prefetch" href="/assets/js/2.1fb4b32b.js"><link rel="prefetch" href="/assets/js/20.4dffd41f.js"><link rel="prefetch" href="/assets/js/21.f75b99b5.js"><link rel="prefetch" href="/assets/js/22.d857298e.js"><link rel="prefetch" href="/assets/js/23.753896aa.js"><link rel="prefetch" href="/assets/js/24.26c7cf07.js"><link rel="prefetch" href="/assets/js/25.ac64d47c.js"><link rel="prefetch" href="/assets/js/26.faf76977.js"><link rel="prefetch" href="/assets/js/27.aa2cf3cf.js"><link rel="prefetch" href="/assets/js/28.f3922c3c.js"><link rel="prefetch" href="/assets/js/29.2ef33179.js"><link rel="prefetch" href="/assets/js/3.45eb40fe.js"><link rel="prefetch" href="/assets/js/30.09fa2a15.js"><link rel="prefetch" href="/assets/js/31.c9d7290b.js"><link rel="prefetch" href="/assets/js/32.b22dfcb2.js"><link rel="prefetch" href="/assets/js/33.15e24e3a.js"><link rel="prefetch" href="/assets/js/35.c3b5fa5d.js"><link rel="prefetch" href="/assets/js/36.8e90b6e9.js"><link rel="prefetch" href="/assets/js/37.0173706d.js"><link rel="prefetch" href="/assets/js/38.5a2a8dc7.js"><link rel="prefetch" href="/assets/js/39.18709c43.js"><link rel="prefetch" href="/assets/js/4.15dcb961.js"><link rel="prefetch" href="/assets/js/40.6d48bfb9.js"><link rel="prefetch" href="/assets/js/41.5897ebc0.js"><link rel="prefetch" href="/assets/js/42.e09519d1.js"><link rel="prefetch" href="/assets/js/43.df9a12cd.js"><link rel="prefetch" href="/assets/js/44.ca901fd8.js"><link rel="prefetch" href="/assets/js/45.7db52010.js"><link rel="prefetch" href="/assets/js/5.218fd775.js"><link rel="prefetch" href="/assets/js/6.dbf58ff1.js"><link rel="prefetch" href="/assets/js/7.8bb65370.js"><link rel="prefetch" href="/assets/js/8.fd95f447.js"><link rel="prefetch" href="/assets/js/9.79fa770a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d5b12882.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">CEU Mass Mediator</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/introduction/" class="nav-link">Introduction</a></div><div class="nav-item"><a href="/peak-search/" class="nav-link">Peak Search</a></div><div class="nav-item"><a href="/browse-search/" class="nav-link">Browse Search</a></div><div class="nav-item"><a href="/oxidised-lipids/" class="nav-link">Oxidised Lipids</a></div><div class="nav-item"><a href="/spectra-quality-controller/" class="nav-link">Spectra Quality Controller</a></div><div class="nav-item"><a href="/pathway-displayer/" class="nav-link">Pathway Displayer</a></div><div class="nav-item"><a href="/msms-search/" class="nav-link">MS/MS Search</a></div><div class="nav-item"><a href="/restful-api/" class="nav-link router-link-active">RESTful API</a></div><div class="nav-item"><a href="/r-library/" class="nav-link">R Library</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/introduction/" class="nav-link">Introduction</a></div><div class="nav-item"><a href="/peak-search/" class="nav-link">Peak Search</a></div><div class="nav-item"><a href="/browse-search/" class="nav-link">Browse Search</a></div><div class="nav-item"><a href="/oxidised-lipids/" class="nav-link">Oxidised Lipids</a></div><div class="nav-item"><a href="/spectra-quality-controller/" class="nav-link">Spectra Quality Controller</a></div><div class="nav-item"><a href="/pathway-displayer/" class="nav-link">Pathway Displayer</a></div><div class="nav-item"><a href="/msms-search/" class="nav-link">MS/MS Search</a></div><div class="nav-item"><a href="/restful-api/" class="nav-link router-link-active">RESTful API</a></div><div class="nav-item"><a href="/r-library/" class="nav-link">R Library</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/restful-api/" class="sidebar-link">RESTful API</a></li><li><a href="/restful-api/batch-search.html" class="sidebar-link">Batch search</a></li><li><a href="/restful-api/batch-advanced-search.html" class="active sidebar-link">Batch advanced search</a></li><li><a href="/restful-api/browse-search.html" class="sidebar-link">Browse Search</a></li><li><a href="/restful-api/msms-search.html" class="sidebar-link">MS/MS Search</a></li><li><a href="/restful-api/long-chain-oxidation-search.html" class="sidebar-link">Long Chain Oxidation Search</a></li><li><a href="/restful-api/short-chain-oxidation-search.html" class="sidebar-link">Short Chain Oxidation Search</a></li><li><a href="/restful-api/spectral-quality-controller.html" class="sidebar-link">Spectral Quality Controller</a></li><li><a href="/restful-api/pathway-displayer.html" class="sidebar-link">Pathway Displayer</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="batch-advanced-search"><a href="#batch-advanced-search" aria-hidden="true" class="header-anchor">#</a> Batch advanced search</h1> <p>Batch advanced search also enables the user (on top of the functionality offered by the batch search service) to find metabolites through the m/z or the {neutral masses query parameters. But, in contrast with the batch search service, it uses additional information devoted to biomarker discovery experiments using LC/MS. The service is accessed through the following URI:</p> <p><a href="http://ceumass.eps.uspceu.es/mediator/api/advancedbatch" target="_blank" rel="noopener noreferrer">http://ceumass.eps.uspceu.es/mediator/api/advancedbatch<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>To perform a query, the user must send a POST request. This request must include:</p> <ul><li>A Content-type header set to application/json.</li> <li>A request body with a JSON object that includes all data needed for the query. In this case, the query is just an extension of the Batch Search query. Therefore, it must include all attributes described in <a href="/restful-api/batch-search.html">batch search section</a> and, on top of that, provide the additional information: RTs, composite spectra (spectra created by the summation of all co-eluting m/z ions that are related), chemical alphabet (possible elements of the putative annotations), etc.</li></ul> <table><thead><tr><th>Name</th> <th>Type</th> <th>Default value</th> <th>Optativity</th></tr></thead> <tbody><tr><td>masses</td> <td>array of doubles</td> <td>-</td> <td>mandatory</td></tr> <tr><td>tolerance</td> <td>double (range: [0..100])</td> <td>10</td> <td>mandatory</td></tr> <tr><td>tolerance_mode</td> <td>tolerance_mode_enum</td> <td>“ppm”</td> <td>mandatory</td></tr> <tr><td>databases</td> <td>array of database_enum</td> <td>“all-except-mine”</td> <td>mandatory</td></tr> <tr><td>metabolites_type</td> <td>metabolites_type_enum</td> <td>“all-except-peptides”</td> <td>mandatory</td></tr> <tr><td>masses_mode</td> <td>masses_mode_enum</td> <td>“mz”</td> <td>mandatory</td></tr> <tr><td>ion_mode</td> <td>ion_mode_enum</td> <td>“positive”</td> <td>mandatory</td></tr> <tr><td>adducts</td> <td>array of positive_enum</td> <td>[“M+H”, “M+2H”, “M+Na”, “M+K”, “M+NH4'”, “M+H-H2O”]</td> <td>mandatory</td></tr> <tr><td>adducts</td> <td>array of negative_enum</td> <td>[“M-H”, “M+Cl”, “M+FA-H”, “M-H-H2O”]</td> <td>mandatory</td></tr> <tr><td>adducts</td> <td>array of neutral_enum</td> <td>[“M”]</td> <td>mandatory</td></tr> <tr><td>chemical_alphabet</td> <td>chemical_alphabet_enum</td> <td>“CHNOPS”</td> <td>mandatory</td></tr> <tr><td>deuterium</td> <td>boolean</td> <td>false</td> <td>mandatory</td></tr> <tr><td>modifiers_type</td> <td>modifiers_type_enum</td> <td>“none”</td> <td>mandatory</td></tr> <tr><td>retention_times</td> <td>array of doubles</td> <td>empty</td> <td>optional</td></tr> <tr><td>composite_spectra</td> <td>array of arrays of spectra_object</td> <td>empty</td> <td>optional</td></tr> <tr><td>all_masses</td> <td>array of doubles</td> <td>empty</td> <td>optional</td></tr> <tr><td>all_retention_times</td> <td>array of doubles</td> <td>empty</td> <td>optional</td></tr> <tr><td>all_composite_spectra</td> <td>array of arrays of spectra_object</td> <td>empty</td> <td>optional</td></tr></tbody></table> <p>The spectra object is defined by:</p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Default value</th></tr></thead> <tbody><tr><td>mz</td> <td>double</td> <td>-</td></tr> <tr><td>intensity</td> <td>double</td> <td>-</td></tr></tbody></table> <p>And the enumeration types used in batch advanced search request are:</p> <table><thead><tr><th>Name</th> <th>Type</th></tr></thead> <tbody><tr><td>tolerance_mode_enum</td> <td>“ppm”, “mDa”</td></tr> <tr><td>database_enum</td> <td>“all”, “all-except-mine”, “HMDB”, “LipidMaps”, “Metlin”, “Kegg”, “in-house”, “mine”</td></tr> <tr><td>metabolites_type_enum</td> <td>“all-except-peptides”, “only-lipids”, “all-including-peptides”</td></tr> <tr><td>masses_mode_enum</td> <td>“neutral”, ”mz”</td></tr> <tr><td>ion_mode_enum</td> <td>“neutral”, ”positive”, “negative”</td></tr> <tr><td>positive_enum</td> <td>''allPositives'', M+3H, M+2H+Na, M+H+2K, M+H+2Na, M+3Na, M+2H, M+H+NH4, M+H+Na, M+H+K, M+ACN+2H, M+2Na, M+2ACN+2H, M+3ACN+2H, M+H, M+Na, M+K, M+NH4, M+H-H2O, 2M+H, 2M+Na, M+H+HCOONa, 2M+H-H2O, M+CH3OH+H, M+ACN+H, M+2Na-H, M+IsoProp+H, M+ACN+Na, M+2K-H, M+DMSO+H, M+2ACN+H, M+IsoProp+Na+H, 2M+NH4, 2M+K, 2M+ACN+H, 2M+ACN+Na, M+H-2H2O, M+NH4-H2O, M+Li, 2M+2H+3H2O, M+H+CH3COOH, M+H+CH3COOHNa</td></tr> <tr><td>negative_enum</td> <td>''allNegatives'', M-3H, M-2H, M-H2O-H, M-H, M+Na-2H, M+Cl, M+K-2H, M+FA-H, M+Hac-H, M+Br, M+TFA-H, 2M-H, 2M+FA-H, 2M+Hac-H, 3M-H, M-H+HCOONa, M+F</td></tr> <tr><td>neutral_enum</td> <td>''allNeutral'', ''M''</td></tr> <tr><td>chemical_alphabet_enum</td> <td>“CHNOPS”, “CHNOPSCL”, “ALL”</td></tr> <tr><td>modifiers_type_enum</td> <td>“none”, “NH3”, “HCOO”, “CH3COO”, “HCOONH3”, “CH3COONH3”</td></tr></tbody></table> <p>The next example shows the JSON structure of a query for the Batch Advanced Search service:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
 &quot;chemical_alphabet&quot;: &quot;all&quot;,
 &quot;modifiers_type&quot;: &quot;none&quot;,
 &quot;metabolites_type&quot;: &quot;all-except-peptides&quot;,
 &quot;databases&quot;: [&quot;hmdb&quot;],
 &quot;masses_mode&quot;: &quot;mz&quot;,
 &quot;ion_mode&quot;: &quot;positive&quot;,
 &quot;adducts&quot;: [&quot;all&quot;],
 &quot;deuterium&quot;: false,
 &quot;tolerance&quot;: 10.0,
 &quot;tolerance_mode&quot;: &quot;ppm&quot;,
 &quot;masses&quot;: [400.3432, ..., 288.2174],
 &quot;all_masses&quot;: [],
 &quot;retention_times&quot;: [18.842525, ..., 4.021555],
 &quot;all_retention_times&quot;: [],
 &quot;composite_spectra&quot;: [
  [{
    &quot;mz&quot;: 400.3432,
    &quot;intensity&quot;: 307034.88
   },
   ...,
   {
    &quot;mz&quot;: 311.20145,
    &quot;intensity&quot;: 400.03336
   },
   ...
  ]
 ]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>When using the Batch Advance Search service, CMM scores the putative annotations based on expert knowledge. Thus, the response structure of this service contains all attributes already defined in <a href="/restful-api/batch-search.html">batch search section</a>, plus some other attributes:</p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Default value</th></tr></thead> <tbody><tr><td>results</td> <td>Array of putative_annotation_object</td> <td>-</td></tr></tbody></table> <p>Each putative annotation structure contains the name of the putative annotation compound, its formula, its molecular weight, the difference between the molecular weight and the corresponding experimental mass (ppm), and references of the compound in external databases.</p> <table><thead><tr><th>Name</th> <th>Type</th></tr></thead> <tbody><tr><td>identifier</td> <td>integer</td></tr> <tr><td>EM</td> <td>double</td></tr> <tr><td>name</td> <td>string</td></tr> <tr><td>formula</td> <td>string</td></tr> <tr><td>adduct</td> <td>positive_enum</td></tr> <tr><td>adduct</td> <td>negative_enum</td></tr> <tr><td>adduct</td> <td>neutral_enum</td></tr> <tr><td>molecular_weight</td> <td>double</td></tr> <tr><td>error_ppm</td> <td>integer</td></tr> <tr><td>ionizationScore</td> <td>integer (Range: -2, [0..2])</td></tr> <tr><td>FinalScore</td> <td>integer (Range: -2, [0..2])</td></tr> <tr><td>cas</td> <td>string</td></tr> <tr><td>kegg_compound</td> <td>string</td></tr> <tr><td>kegg_uri</td> <td>string</td></tr> <tr><td>hmdb_compound</td> <td>string</td></tr> <tr><td>hmdb_uri</td> <td>string</td></tr> <tr><td>lipidmaps_compound</td> <td>string</td></tr> <tr><td>lipidmaps_uri</td> <td>string</td></tr> <tr><td>metlin_compound</td> <td>string</td></tr> <tr><td>metlin_uri</td> <td>string</td></tr> <tr><td>pubchem_compound</td> <td>string</td></tr> <tr><td>pubchem_uri</td> <td>string</td></tr> <tr><td>pathways</td> <td>array of strings</td></tr> <tr><td>inChiKey</td> <td>string</td></tr> <tr><td>RT</td> <td>double</td></tr> <tr><td>adductRelationScore</td> <td>integer (Range: -2, [0..2])</td></tr> <tr><td>RTScore</td> <td>integer (Range: -2, [0..2])</td></tr></tbody></table> <p>This example shows the results of a successful request:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
 &quot;results&quot;: [
  {
   &quot;RT&quot;: 8.144917,
   &quot;adductRelationScore&quot;: -2,
   &quot;RTscore&quot;: 2,
   &quot;identifier&quot;: 111123,
   &quot;EM&quot;: 338.2299,
   &quot;name&quot;: &quot;MG(0:0/i-12:0/0:0)&quot;,
   &quot;formula&quot;: &quot;C15H30O4&quot;,
   &quot;adduct&quot;: &quot;M+ACN+Na&quot;,
   &quot;molecular_weight&quot;: 274.214409446,
   &quot;error_ppm&quot;: 1,
   &quot;ionizationScore&quot;: -2,
   &quot;finalScore&quot;: 2,
   &quot;kegg_compound&quot;: &quot;&quot;,
   &quot;kegg_uri&quot;: &quot;&quot;,
   &quot;hmdb_compound&quot;: &quot;HMDB0072858&quot;,
   &quot;hmdb_uri&quot;: &quot;http://www.hmdb.ca/metabolites/HMDB0072858&quot;,
   &quot;lipidmaps_compound&quot;: &quot;&quot;,
   &quot;lipidmaps_uri&quot;: &quot;&quot;,
   &quot;metlin_compound&quot;: &quot;&quot;,
   &quot;metlin_uri&quot;: &quot;&quot;,
   &quot;pubchem_compound&quot;: &quot;131779644&quot;,
   &quot;pubchem_uri&quot;: &quot;https://pubchem.ncbi.nlm.nih.gov/compound/131779644&quot;,
   &quot;pathways&quot;: []
  },
  ...
 ]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/restful-api/batch-search.html" class="prev">
          Batch search
        </a></span> <span class="next"><a href="/restful-api/browse-search.html">
          Browse Search
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.dbc11d85.js" defer></script><script src="/assets/js/34.8f9b87c0.js" defer></script>
  </body>
</html>
